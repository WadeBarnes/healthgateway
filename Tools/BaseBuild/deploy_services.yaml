# Process the webclient template for each environment

# DEV
echo "DEV started"
oc project q6qfzk-dev
oc delete route patient
oc delete route immunization
oc process -f ./service.yaml -p NAME=patient -p ENV=dev | oc apply -f -
oc process -f ./service.yaml -p NAME=immunization -p ENV=dev | oc apply -f -
echo "DEV ended"

# TEST
echo "TEST started"
oc project q6qfzk-test
oc delete route patient
oc delete route immunization
oc process -f ./service.yaml -p NAME=patient -p ENV=test | oc apply -f -
oc process -f ./service.yaml -p NAME=patient -p ENV=test | oc apply -f -
echo "TEST ended"

# DEMO
echo "DEMO started"
oc project q6qfzk-test
oc delete route patient-demo
oc delete route immunization-demo
oc process -f ./service.yaml -p NAME=patient-demo -p ENV=demo -p COMMON_CONFIG=common-demo | oc apply -f -
oc process -f ./service.yaml -p NAME=patient-demo -p ENV=demo -p COMMON_CONFIG=common-demo | oc apply -f -
echo "DEMO ended"

# TRAINING
echo "TRAINING started"
oc project q6qfzk-prod
oc delete route patient
oc delete route immunization
oc process -f ./service.yaml -p NAME=patient -p ENV=training  | oc apply -f -
oc process -f ./service.yaml -p NAME=patient -p ENV=training  | oc apply -f -
echo "TRAINING ended"

read -p "Deployment is DONE. Press [Enter] to exit..."
